<div class="modal-backdrop" (click)="onCancel()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <h2>Нова публікація</h2>

    <form [formGroup]="createForm" (ngSubmit)="submit()">

      <input
        type="text"
        formControlName="title"
        placeholder="Заголовок"
        [class.error]="createForm.get('title')?.invalid && createForm.get('title')?.touched"
      >

      <textarea
        formControlName="content"
        placeholder="Про що хочете розповісти?"
        rows="5"
        [class.error]="createForm.get('content')?.invalid && createForm.get('content')?.touched"
      ></textarea>

      <div class="image-preview-container" *ngIf="imagePreview">
        <img [src]="imagePreview" alt="Selected image">
        <button type="button" class="remove-btn" (click)="removeImage()">✕</button>
      </div>

      <div class="modal-footer">

        <div class="attachment-actions">
          <input
            type="file"
            #fileInput
            (change)="onFileSelected($event)"
            hidden
            accept="image/*"
          >
          <button type="button" class="btn-icon" (click)="fileInput.click()" title="Додати фото">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span>Фото</span>
          </button>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn secondary" (click)="onCancel()">Скасувати</button>
          <button
            type="submit"
            class="btn primary"
            [disabled]="createForm.invalid || isSubmitting">
            {{ isSubmitting ? 'Публікація...' : 'Опублікувати' }}
          </button>
        </div>

      </div>
    </form>

  </div>
</div>
