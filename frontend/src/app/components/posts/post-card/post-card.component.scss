/* post-card.component.scss */

/* --- Design Tokens --- */
:host {
  /* Palette */
  --c-bg-page: #fafafa;
  --c-bg-card: #ffffff;
  --c-bg-subtle: #f8fafc;

  --c-text-primary: #1a1a1a;
  --c-text-secondary: #737373;
  --c-text-tertiary: #a3a3a3;

  --c-accent: #0095f6;
  --c-accent-hover: #1877f2;
  --c-danger: #ff3040;

  --c-border: #dbdbdb;
  --c-divider: #efefef;

  /* Spacing */
  --radius-card: 12px;

  /* ðŸ‘‡ Ð—Ð‘Ð†Ð›Ð¬Ð¨Ð•ÐÐž: ÐÐ²Ð°Ñ‚Ð°Ñ€ÐºÐ° Ð±ÑƒÐ»Ð° 32px, ÑÑ‚Ð°Ð»Ð° 38px */
  --avatar-size: 38px;

  /* Fonts */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  display: block;
}

/* --- MAIN CARD --- */
.post-card {
  background: var(--c-bg-card);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-card);

  /* ðŸ‘‡ Ð—Ð‘Ð†Ð›Ð¬Ð¨Ð•ÐÐž: Ð¨Ð¸Ñ€Ð¸Ð½Ð° Ð±ÑƒÐ»Ð° 470px, ÑÑ‚Ð°Ð»Ð° 540px */
  max-width: 540px;

  width: 100%;
  margin: 0 auto 24px; /* Ð¦ÐµÐ½Ñ‚Ñ€ÑƒÐ²Ð°Ð½Ð½Ñ */

  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;

  @media (hover: hover) {
    &:hover {
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      border-color: rgba(0,0,0,0.15);
    }
  }
}

/* --- HEADER --- */
.post-header {
  padding: 12px 16px; /* Ð¢Ñ€Ð¾Ñ…Ð¸ Ð±Ñ–Ð»ÑŒÑˆÐµ Ð¿Ð¾Ð²Ñ–Ñ‚Ñ€Ñ */
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #fff;

  .user-group {
    display: flex; align-items: center; gap: 12px;
    cursor: pointer;
    text-decoration: none;

    &:hover .username { text-decoration: underline; }
  }

  .avatar-container {
    width: var(--avatar-size);
    height: var(--avatar-size);
    border-radius: 50%;
    position: relative;

    &::after {
      content: ''; position: absolute; inset: 0;
      border-radius: 50%; border: 1px solid rgba(0,0,0,0.1);
    }

    img, .initials {
      width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: block;
    }

    .initials {
      display: flex; align-items: center; justify-content: center;
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
      color: var(--c-text-secondary);
      font-weight: 700; font-size: 13px; /* Ð¢Ñ€Ð¾Ñ…Ð¸ Ð±Ñ–Ð»ÑŒÑˆÐ¸Ð¹ ÑˆÑ€Ð¸Ñ„Ñ‚ Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð² */
    }
  }

  .meta-info {
    display: flex; flex-direction: column; justify-content: center; line-height: 1.25;
    /* ðŸ‘‡ Ð—Ð‘Ð†Ð›Ð¬Ð¨Ð•ÐÐž: Ð¨Ñ€Ð¸Ñ„Ñ‚ Ñ–Ð¼ÐµÐ½Ñ– 14px -> 15px */
    .username { font-weight: 600; font-size: 15px; color: var(--c-text-primary); }
    .date { font-size: 12px; color: var(--c-text-secondary); margin-top: 2px; }
  }
}

/* --- MEDIA --- */
.post-media {
  width: 100%;
  background-color: #f5f5f5;
  border-top: 1px solid var(--c-divider);
  border-bottom: 1px solid var(--c-divider);
  position: relative;
  cursor: pointer;

  .image-container {
    width: 100%;
    /* Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ñ„Ð¾Ñ‚Ð¾ Ð±ÑƒÑ‚Ð¸ Ñ‚Ñ€Ð¾Ñ…Ð¸ Ð²Ð¸Ñ‰Ð¸Ð¼, Ð±Ð¾ ÐºÐ°Ñ€Ñ‚ÐºÐ° ÑˆÐ¸Ñ€ÑˆÐ° */
    max-height: 650px;
    min-height: 300px;
    display: flex; align-items: center; justify-content: center;
    overflow: hidden;

    img {
      width: 100%; height: 100%;
      object-fit: cover;
      display: block;
    }
  }
}

/* --- ACTIONS BAR --- */
.post-actions-bar {
  padding: 12px 16px 8px;

  .actions-left { display: flex; align-items: center; gap: 18px; }

  .action-btn {
    background: transparent; border: none; padding: 0;
    cursor: pointer; display: flex; align-items: center; gap: 8px;
    color: var(--c-text-primary);
    transition: transform 0.1s;

    &:active { transform: scale(0.9); }
    &:hover { color: var(--c-text-secondary); }

    /* Ð†ÐºÐ¾Ð½ÐºÐ¸ Ñ‚Ð°ÐºÐ¾Ð¶ Ñ‚Ñ€Ð¾Ñ…Ð¸ Ð±Ñ–Ð»ÑŒÑˆÑ– 24px -> 26px */
    svg {
      width: 26px; height: 26px;
      stroke-width: 1.7px;
      fill: transparent; stroke: currentColor;
    }

    &.like-btn.active {
      color: var(--c-danger);
      svg { fill: var(--c-danger); stroke: var(--c-danger); animation: heartBurst 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    }

    .count-label { font-weight: 600; font-size: 15px; line-height: 1; }
  }
}

/* --- CONTENT (Caption) --- */
.post-content {
  padding: 0 16px 16px;
  font-size: 15px; /* ÐžÑÐ½Ð¾Ð²Ð½Ð¸Ð¹ ÑˆÑ€Ð¸Ñ„Ñ‚ Ñ‚ÐµÐºÑÑ‚Ñƒ 14px -> 15px */

  .caption-block {
    margin-bottom: 8px;
    line-height: 1.5;

    .author-name-inline {
      font-weight: 600; margin-right: 6px; color: var(--c-text-primary);
      cursor: pointer; &:hover { text-decoration: underline; }
    }

    .post-text {
      color: var(--c-text-primary);
      display: inline;
      word-break: break-word;
    }
  }

  .view-comments-link {
    display: inline-block;
    color: var(--c-text-secondary);
    font-size: 14px;
    cursor: pointer;
    margin-top: 6px;
    &:hover { color: var(--c-text-primary); }
  }
}

/* --- COMMENTS SECTION --- */
.comments-section {
  padding: 14px 16px;
  border-top: 1px solid var(--c-divider);
  background: #fff;

  .loading-state {
    font-size: 13px; color: var(--c-text-tertiary); padding-bottom: 10px;
  }

  .comment-item {
    display: flex; align-items: flex-start; gap: 12px;
    margin-bottom: 14px;

    &:last-child { margin-bottom: 0; }

    .c-avatar {
      flex-shrink: 0;
      width: 34px; height: 34px;
      border-radius: 50%; overflow: hidden;
      background: var(--c-divider);
      cursor: pointer;
      transition: opacity 0.2s;

      &:hover { opacity: 0.8; }

      img, .initials { width: 100%; height: 100%; object-fit: cover; }
      .initials { display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; color: #777; }
    }

    .c-body {
      flex: 1;
      background: var(--c-bg-subtle);
      padding: 10px 14px;
      border-radius: 0 18px 18px 18px;
      font-size: 14px;

      .c-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 4px;
      }

      .c-user {
        font-weight: 600; color: var(--c-text-primary); cursor: pointer;
        &:hover { text-decoration: underline; }
      }
      .c-date { font-weight: 400; font-size: 12px; color: var(--c-text-tertiary); }

      .c-text {
        color: var(--c-text-primary);
        line-height: 1.45;
        word-break: break-word;
      }
    }
  }

  /* INPUT AREA */
  .comment-input-wrapper {
    display: flex; align-items: center; gap: 12px;
    margin-top: 18px;
    padding-top: 14px;
    border-top: 1px solid var(--c-divider);

    input {
      flex: 1; border: none; background: transparent;
      padding: 6px 0; font-size: 15px; color: var(--c-text-primary);
      &::placeholder { color: var(--c-text-tertiary); }
      &:focus { outline: none; }
    }

    .post-link-btn {
      background: none; border: none; padding: 4px 0;
      color: var(--c-accent); font-weight: 600; font-size: 15px;
      cursor: pointer; opacity: 1; transition: opacity 0.2s;

      &:disabled { opacity: 0.3; cursor: default; }
      &:not(:disabled):hover { color: var(--c-accent-hover); }
    }
  }
}

@keyframes heartBurst {
  0% { transform: scale(1); }
  50% { transform: scale(1.25); }
  100% { transform: scale(1); }
}

@media (max-width: 580px) {
  .post-card {
    border: none; border-top: 1px solid var(--c-divider); border-bottom: 1px solid var(--c-divider);
    border-radius: 0; box-shadow: none; margin-bottom: 0;
    max-width: 100%;
  }
}
