<div class="chat-wrapper">

  <!-- LEFT PANEL -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Повідомлення</h2>
    </div>

    <div class="chat-list">
      <div *ngFor="let chat of chats"
           class="chat-item"
           [class.active]="selectedChat?.id === chat.id"
           (click)="openChat(chat)">

        <div class="avatar">
          {{ chat.name[0] }}
        </div>

        <div class="chat-info">
          <div class="chat-title">{{ chat.name }}</div>
          <div class="chat-date">{{ chat.startedAt | date:'short' }}</div>
        </div>

      </div>
    </div>
  </aside>

  <!-- RIGHT PANEL (Chat Window) -->
  <main class="chat-window" *ngIf="selectedChat; else emptyState">

    <header class="chat-header">
      <div class="avatar big">{{ selectedChat.name[0] }}</div>
      <div class="title-block">
        <div class="name">{{ selectedChat.name }}</div>
        <div class="typing" *ngIf="typingUser">друкує...</div>
      </div>
    </header>

    <section class="messages-box" id="scrollBox">
      <div *ngFor="let msg of messages"
           class="message"
           [class.mine]="msg.senderId === userId">

        <div class="bubble">{{ msg.text }}</div>
        <div class="time">{{ msg.createdAt | date:'shortTime' }}</div>
      </div>
    </section>

    <footer class="input-box">
      <input
        [(ngModel)]="newMessage"
        (input)="onTyping()"
        placeholder="Написати повідомлення..."
      />

      <button (click)="sendMessage()">
        <i class="send-icon">➤</i>
      </button>
    </footer>

  </main>

  <ng-template #emptyState>
    <div class="empty-screen">
      <h3>Виберіть чат</h3>
    </div>
  </ng-template>

</div>
